<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Enginx ‚Äî File Manager</title>
    <style>
        :root {
            --primary: #6366f1;
            --primary-light: #818cf8;
            --accent: #06b6d4;
            --accent2: #8b5cf6;
            --bg: #030712;
            --bg-card: rgba(15, 23, 42, 0.95);
            --bg-hover: rgba(99, 102, 241, 0.06);
            --text: #f1f5f9;
            --text-muted: #94a3b8;
            --text-dim: #64748b;
            --border: rgba(99, 102, 241, 0.12);
            --border-hover: rgba(99, 102, 241, 0.3);
            --row-hover: rgba(99, 102, 241, 0.04);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* ===== BACKGROUND ===== */

        /* ===== NAV ===== */
        nav {
            position: sticky; top: 0;
            padding: 0.8rem 2rem;
            background: rgba(3, 7, 18, 0.97);
            border-bottom: 1px solid var(--border);
            z-index: 100;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo-box {
            display: flex;
            align-items: center;
            gap: 0.65rem;
        }

        .logo-box svg {
            width: 32px; height: 32px;
            transition: transform 0.4s;
        }

        .logo-box svg:hover { transform: rotate(-8deg) scale(1.1); }

        .logo-box span {
            font-weight: 800; font-size: 1.15rem;
            background: linear-gradient(135deg, #fff, var(--primary-light), var(--accent));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
        }

        .nav-info {
            font-size: 0.78rem;
            color: var(--text-dim);
            font-family: 'Consolas', 'SF Mono', monospace;
        }

        /* ===== MAIN CONTAINER ===== */
        .container {
            position: relative;
            z-index: 1;
            max-width: 1100px;
            margin: 0 auto;
            padding: 2rem 1.5rem 4rem;
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to   { opacity: 1; transform: translateY(0); }
        }

        /* ===== BREADCRUMB ===== */
        .breadcrumb {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .breadcrumb a {
            color: var(--primary-light);
            text-decoration: none;
            font-size: 0.88rem;
            font-weight: 500;
            padding: 0.25rem 0.6rem;
            border-radius: 6px;
            transition: all 0.3s;
        }

        .breadcrumb a:hover {
            background: rgba(99,102,241,0.1);
            color: #fff;
        }

        .breadcrumb .sep {
            color: var(--text-dim);
            font-size: 0.75rem;
        }

        .breadcrumb .current {
            color: var(--text);
            font-weight: 600;
        }

        /* ===== TOOLBAR ===== */
        .toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .search-box {
            position: relative;
            flex: 1;
            max-width: 360px;
        }

        .search-box input {
            width: 100%;
            padding: 0.6rem 1rem 0.6rem 2.5rem;
            background: rgba(15, 23, 42, 0.95);
            border: 1px solid var(--border);
            border-radius: 10px;
            color: var(--text);
            font-size: 0.88rem;
            font-family: inherit;
            outline: none;
            transition: border-color 0.3s;
        }

        .search-box input::placeholder { color: var(--text-dim); }
        .search-box input:focus { border-color: var(--primary); }

        .search-icon {
            position: absolute;
            left: 0.85rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-dim);
            font-size: 0.85rem;
            pointer-events: none;
        }

        .view-toggle {
            display: flex;
            gap: 0.25rem;
            background: rgba(15, 23, 42, 0.95);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 0.2rem;
        }

        .view-btn {
            padding: 0.45rem 0.75rem;
            border: none;
            background: transparent;
            color: var(--text-dim);
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s;
        }

        .view-btn.active {
            background: rgba(99,102,241,0.15);
            color: var(--primary-light);
        }

        .view-btn:hover:not(.active) { color: var(--text); }

        .file-count {
            font-size: 0.82rem;
            color: var(--text-dim);
        }

        .file-count strong {
            color: var(--primary-light);
        }

        /* ===== TABLE VIEW ===== */
        .file-table {
            width: 100%;
            background: rgba(15, 23, 42, 0.95);
            border: 1px solid var(--border);
            border-radius: 16px;
            overflow: hidden;
        }

        .file-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .file-table thead th {
            padding: 0.8rem 1.2rem;
            text-align: left;
            font-size: 0.72rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            color: var(--text-dim);
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            user-select: none;
            transition: color 0.3s;
            white-space: nowrap;
        }

        .file-table thead th:hover { color: var(--primary-light); }

        .file-table thead th .sort-arrow {
            display: inline-block;
            margin-left: 0.3rem;
            font-size: 0.65rem;
            opacity: 0.4;
            transition: opacity 0.3s;
        }

        .file-table thead th:hover .sort-arrow { opacity: 1; }

        .file-table tbody tr {
            border-bottom: 1px solid rgba(99,102,241,0.06);
            transition: background 0.25s;
            cursor: pointer;
        }

        .file-table tbody tr:last-child { border-bottom: none; }
        .file-table tbody tr:hover { background: var(--row-hover); }

        .file-table tbody td {
            padding: 0.65rem 1.2rem;
            font-size: 0.9rem;
        }

        .file-name-cell {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .file-name-cell a {
            color: var(--text);
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }

        .file-name-cell a:hover { color: var(--primary-light); }

        .file-size { color: var(--text-muted); font-family: 'Consolas', 'SF Mono', monospace; font-size: 0.82rem; }
        .file-date { color: var(--text-dim); font-size: 0.82rem; }

        /* ===== GRID VIEW ===== */
        .file-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 1rem;
        }

        .grid-item {
            background: rgba(15, 23, 42, 0.95);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 1.2rem 0.8rem;
            text-align: center;
            transition: all 0.35s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            text-decoration: none;
            display: block;
        }

        .grid-item:hover {
            border-color: var(--border-hover);
            transform: translateY(-4px);
            background: var(--bg-hover);
        }

        .grid-item .grid-icon {
            font-size: 2.5rem;
            margin-bottom: 0.6rem;
            display: block;
            transition: transform 0.3s;
        }

        .grid-item:hover .grid-icon { transform: scale(1.15); }

        .grid-item .grid-name {
            font-size: 0.78rem;
            font-weight: 500;
            color: var(--text);
            word-break: break-all;
            line-height: 1.4;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .grid-item .grid-size {
            font-size: 0.68rem;
            color: var(--text-dim);
            margin-top: 0.3rem;
            font-family: 'Consolas', 'SF Mono', monospace;
        }

        /* ===== FILE ICONS ===== */
        .file-icon {
            width: 36px; height: 36px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            flex-shrink: 0;
            transition: transform 0.3s;
        }

        tr:hover .file-icon { transform: scale(1.1); }

        .icon-folder   { background: linear-gradient(135deg, rgba(251,191,36,0.15), rgba(245,158,11,0.1)); }
        .icon-parent   { background: linear-gradient(135deg, rgba(99,102,241,0.15), rgba(139,92,246,0.1)); }
        .icon-html     { background: linear-gradient(135deg, rgba(239,68,68,0.15), rgba(249,115,22,0.1)); }
        .icon-css      { background: linear-gradient(135deg, rgba(59,130,246,0.15), rgba(99,102,241,0.1)); }
        .icon-js       { background: linear-gradient(135deg, rgba(251,191,36,0.15), rgba(234,179,8,0.1)); }
        .icon-ts       { background: linear-gradient(135deg, rgba(59,130,246,0.15), rgba(37,99,235,0.1)); }
        .icon-py       { background: linear-gradient(135deg, rgba(52,211,153,0.15), rgba(16,185,129,0.1)); }
        .icon-php      { background: linear-gradient(135deg, rgba(139,92,246,0.15), rgba(124,58,237,0.1)); }
        .icon-rb       { background: linear-gradient(135deg, rgba(239,68,68,0.15), rgba(220,38,38,0.1)); }
        .icon-c        { background: linear-gradient(135deg, rgba(59,130,246,0.15), rgba(37,99,235,0.1)); }
        .icon-cpp      { background: linear-gradient(135deg, rgba(99,102,241,0.15), rgba(79,70,229,0.1)); }
        .icon-h        { background: linear-gradient(135deg, rgba(139,92,246,0.15), rgba(109,40,217,0.1)); }
        .icon-java     { background: linear-gradient(135deg, rgba(249,115,22,0.15), rgba(234,88,12,0.1)); }
        .icon-go       { background: linear-gradient(135deg, rgba(6,182,212,0.15), rgba(8,145,178,0.1)); }
        .icon-rs       { background: linear-gradient(135deg, rgba(249,115,22,0.15), rgba(194,65,12,0.1)); }
        .icon-json     { background: linear-gradient(135deg, rgba(251,191,36,0.15), rgba(202,138,4,0.1)); }
        .icon-xml      { background: linear-gradient(135deg, rgba(249,115,22,0.15), rgba(234,88,12,0.1)); }
        .icon-yaml     { background: linear-gradient(135deg, rgba(239,68,68,0.15), rgba(185,28,28,0.1)); }
        .icon-md       { background: linear-gradient(135deg, rgba(148,163,184,0.15), rgba(100,116,139,0.1)); }
        .icon-txt      { background: linear-gradient(135deg, rgba(148,163,184,0.15), rgba(100,116,139,0.1)); }
        .icon-pdf      { background: linear-gradient(135deg, rgba(239,68,68,0.15), rgba(185,28,28,0.1)); }
        .icon-img      { background: linear-gradient(135deg, rgba(52,211,153,0.15), rgba(5,150,105,0.1)); }
        .icon-video    { background: linear-gradient(135deg, rgba(236,72,153,0.15), rgba(219,39,119,0.1)); }
        .icon-audio    { background: linear-gradient(135deg, rgba(168,85,247,0.15), rgba(147,51,234,0.1)); }
        .icon-zip      { background: linear-gradient(135deg, rgba(251,191,36,0.15), rgba(161,98,7,0.1)); }
        .icon-exe      { background: linear-gradient(135deg, rgba(148,163,184,0.15), rgba(71,85,105,0.1)); }
        .icon-sh       { background: linear-gradient(135deg, rgba(52,211,153,0.15), rgba(16,185,129,0.1)); }
        .icon-docker   { background: linear-gradient(135deg, rgba(6,182,212,0.15), rgba(14,116,144,0.1)); }
        .icon-git      { background: linear-gradient(135deg, rgba(249,115,22,0.15), rgba(234,88,12,0.1)); }
        .icon-env      { background: linear-gradient(135deg, rgba(251,191,36,0.15), rgba(161,98,7,0.1)); }
        .icon-make     { background: linear-gradient(135deg, rgba(52,211,153,0.15), rgba(5,150,105,0.1)); }
        .icon-sql      { background: linear-gradient(135deg, rgba(59,130,246,0.15), rgba(29,78,216,0.1)); }
        .icon-conf     { background: linear-gradient(135deg, rgba(148,163,184,0.15), rgba(71,85,105,0.1)); }
        .icon-lock     { background: linear-gradient(135deg, rgba(251,191,36,0.15), rgba(161,98,7,0.1)); }
        .icon-log      { background: linear-gradient(135deg, rgba(148,163,184,0.15), rgba(71,85,105,0.1)); }
        .icon-font     { background: linear-gradient(135deg, rgba(236,72,153,0.15), rgba(190,24,93,0.1)); }
        .icon-svg      { background: linear-gradient(135deg, rgba(251,191,36,0.15), rgba(245,158,11,0.1)); }
        .icon-default  { background: linear-gradient(135deg, rgba(148,163,184,0.1), rgba(71,85,105,0.06)); }

        /* ===== HIDDEN TOGGLE ===== */
        .hidden { display: none !important; }

        /* ===== EMPTY STATE ===== */
        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: var(--text-dim);
        }

        .empty-state .empty-icon { font-size: 3rem; margin-bottom: 1rem; opacity: 0.5; }
        .empty-state p { font-size: 0.95rem; }

        /* ===== FOOTER ===== */
        footer {
            border-top: 1px solid var(--border);
            padding: 1.5rem 2rem;
            text-align: center;
            position: relative;
            z-index: 1;
        }

        .foot-inner {
            max-width: 1100px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .foot-brand {
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .foot-brand svg {
            width: 18px; height: 18px;
        }

        .foot-brand span {
            font-weight: 700; font-size: 0.82rem;
            background: linear-gradient(135deg, #fff, var(--primary-light));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
        }

        .foot-text {
            color: var(--text-dim);
            font-size: 0.75rem;
        }
		        /* ===== UPLOAD & DELETE ===== */
        .action-bar {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .upload-btn, .delete-btn {
            padding: 0.5rem 1rem;
            border: 1px solid var(--border);
            border-radius: 10px;
            background: rgba(15, 23, 42, 0.95);
            color: var(--text-muted);
            font-size: 0.82rem;
            font-family: inherit;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 0.4rem;
        }

        .upload-btn:hover {
            border-color: var(--accent);
            color: var(--accent);
            background: rgba(6, 182, 212, 0.06);
        }

        .delete-btn {
            display: none;
            border-color: rgba(239, 68, 68, 0.3);
            color: var(--text-dim);
        }

        .delete-btn:hover {
            border-color: #ef4444;
            color: #ef4444;
            background: rgba(239, 68, 68, 0.06);
        }

        .delete-btn.visible { display: flex; }

        /* Checkbox in table rows */
        .file-checkbox {
            width: 16px; height: 16px;
            accent-color: var(--primary);
            cursor: pointer;
            margin: 0;
        }

        .file-table thead th:first-child,
        .file-table tbody td:first-child {
            width: 40px;
            text-align: center;
        }

        /* Upload drop zone */
        .drop-overlay {
            display: none;
            position: fixed;
            inset: 0;
            z-index: 999;
            background: rgba(3, 7, 18, 0.92);
            backdrop-filter: blur(8px);
            justify-content: center;
            align-items: center;
            flex-direction: column;
            gap: 1rem;
        }

        .drop-overlay.active { display: flex; }

        .drop-overlay .drop-icon { font-size: 4rem; opacity: 0.7; }

        .drop-overlay .drop-text {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--accent);
        }

        .drop-overlay .drop-sub {
            font-size: 0.85rem;
            color: var(--text-dim);
        }

        /* Upload progress */
        .upload-progress {
            display: none;
            margin-bottom: 1rem;
            background: rgba(15, 23, 42, 0.95);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1rem 1.2rem;
        }

        .upload-progress.active { display: block; }

        .upload-progress .prog-title {
            font-size: 0.82rem;
            font-weight: 600;
            color: var(--text);
            margin-bottom: 0.5rem;
            display: flex;
            justify-content: space-between;
        }

        .upload-progress .prog-bar {
            height: 6px;
            background: rgba(99, 102, 241, 0.15);
            border-radius: 3px;
            overflow: hidden;
        }

        .upload-progress .prog-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 3px;
            width: 0%;
            transition: width 0.3s;
        }

        .upload-progress .prog-status {
            font-size: 0.75rem;
            color: var(--text-dim);
            margin-top: 0.4rem;
        }

        /* Toast notifications */
        .toast-container {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .toast {
            padding: 0.7rem 1.2rem;
            border-radius: 10px;
            font-size: 0.85rem;
            font-weight: 500;
            animation: slideIn 0.3s ease-out;
            max-width: 360px;
            cursor: default;
            transition: opacity 0.3s;
        }

        .toast-success {
            background: rgba(16, 185, 129, 0.15);
            border: 1px solid rgba(16, 185, 129, 0.3);
            color: #34d399;
        }

        .toast-error {
            background: rgba(239, 68, 68, 0.15);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #f87171;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(30px); }
            to   { opacity: 1; transform: translateX(0); }
        }

        /* Confirm dialog */
        .confirm-overlay {
            display: none;
            position: fixed;
            inset: 0;
            z-index: 1000;
            background: rgba(3, 7, 18, 0.85);
            backdrop-filter: blur(6px);
            justify-content: center;
            align-items: center;
        }

        .confirm-overlay.active { display: flex; }

        .confirm-box {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 2rem;
            max-width: 420px;
            width: 90%;
            text-align: center;
        }

        .confirm-box .confirm-icon { font-size: 2.5rem; margin-bottom: 0.8rem; }
        .confirm-box .confirm-title { font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem; }
        .confirm-box .confirm-msg { font-size: 0.88rem; color: var(--text-muted); margin-bottom: 1.5rem; line-height: 1.5; }

        .confirm-box .confirm-actions {
            display: flex;
            gap: 0.75rem;
            justify-content: center;
        }

        .confirm-box .btn-cancel, .confirm-box .btn-confirm {
            padding: 0.55rem 1.5rem;
            border-radius: 10px;
            border: 1px solid var(--border);
            font-size: 0.85rem;
            font-family: inherit;
            cursor: pointer;
            transition: all 0.3s;
        }

        .confirm-box .btn-cancel {
            background: transparent;
            color: var(--text-muted);
        }

        .confirm-box .btn-cancel:hover {
            background: rgba(148, 163, 184, 0.1);
            color: var(--text);
        }

        .confirm-box .btn-confirm {
            background: rgba(239, 68, 68, 0.15);
            border-color: rgba(239, 68, 68, 0.3);
            color: #f87171;
        }

        .confirm-box .btn-confirm:hover {
            background: rgba(239, 68, 68, 0.25);
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .container { padding: 1.5rem 1rem 3rem; }
            .toolbar { flex-direction: column; align-items: stretch; }
            .search-box { max-width: none; }
            .file-table thead th:nth-child(3),
            .file-table tbody td:nth-child(3) { display: none; }
            .foot-inner { flex-direction: column; gap: 0.5rem; }
            .file-grid { grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); }
        }

        @media (max-width: 480px) {
            nav { padding: 0.6rem 1rem; }
            .file-table thead th:nth-child(2),
            .file-table tbody td:nth-child(2) { display: none; }
            .file-grid { grid-template-columns: repeat(auto-fill, minmax(90px, 1fr)); gap: 0.6rem; }
            .grid-item { padding: 0.8rem 0.5rem; }
            .grid-item .grid-icon { font-size: 2rem; }
        }
    </style>
</head>
<body>

<!-- DROP OVERLAY -->
<div class="drop-overlay" id="dropOverlay">
    <div class="drop-icon">üì§</div>
    <div class="drop-text">Drop files to upload</div>
    <div class="drop-sub">Files will be uploaded to the current directory</div>
</div>

<!-- TOAST CONTAINER -->
<div class="toast-container" id="toastContainer"></div>

<!-- CONFIRM DIALOG -->
<div class="confirm-overlay" id="confirmOverlay">
    <div class="confirm-box">
        <div class="confirm-icon">üóëÔ∏è</div>
        <div class="confirm-title">Delete files?</div>
        <div class="confirm-msg" id="confirmMsg">Are you sure you want to delete the selected files?</div>
        <div class="confirm-actions">
            <button class="btn-cancel" id="confirmCancel">Cancel</button>
            <button class="btn-confirm" id="confirmDelete">Delete</button>
        </div>
    </div>
</div>

<!-- NAV -->
<nav>
    <div class="logo-box">
        <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
            <defs>
                <linearGradient id="lg" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" stop-color="#6366f1"/>
                    <stop offset="50%" stop-color="#06b6d4"/>
                    <stop offset="100%" stop-color="#8b5cf6"/>
                </linearGradient>
            </defs>
            <polygon points="50,8 92,30 92,70 50,92 8,70 8,30" fill="none" stroke="url(#lg)" stroke-width="3"/>
            <polygon points="50,20 78,35 78,65 50,80 22,65 22,35" fill="none" stroke="url(#lg)" stroke-width="1.5" opacity="0.35"/>
            <text x="50" y="58" text-anchor="middle" font-family="system-ui" font-weight="900" font-size="28" fill="url(#lg)">E</text>
        </svg>
        <span>Enginx</span>
    </div>
    <div class="nav-info" id="navPath"></div>
</nav>

<!-- MAIN -->
<div class="container">

    <!-- BREADCRUMB -->
    <div class="breadcrumb" id="breadcrumb"></div>

    <!-- TOOLBAR -->
    <div class="toolbar">
        <div class="search-box">
            <span class="search-icon">üîç</span>
            <input type="text" id="searchInput" placeholder="Filter files and folders...">
        </div>
        <div style="display:flex;align-items:center;gap:1rem;">
            <div class="file-count" id="fileCount"></div>
            <div class="action-bar">
                <button class="upload-btn" id="uploadBtn" title="Upload files">üì§ Upload</button>
                <input type="file" id="fileInput" multiple style="display:none">
                <button class="delete-btn" id="deleteBtn" title="Delete selected">üóëÔ∏è Delete</button>
            </div>
            <div class="view-toggle">
                <button class="view-btn active" id="listViewBtn" title="List view">‚ò∞</button>
                <button class="view-btn" id="gridViewBtn" title="Grid view">‚äû</button>
            </div>
        </div>
    </div>

    <!-- UPLOAD PROGRESS -->
    <div class="upload-progress" id="uploadProgress">
        <div class="prog-title">
            <span id="progName">Uploading...</span>
            <span id="progPercent">0%</span>
        </div>
        <div class="prog-bar"><div class="prog-fill" id="progFill"></div></div>
        <div class="prog-status" id="progStatus">Preparing...</div>
    </div>

    <!-- LIST VIEW -->
    <div class="file-table" id="listView">
        <table>
            <thead>
                <tr>
                    <th><input type="checkbox" class="file-checkbox" id="selectAll" title="Select all"></th>
                    <th data-sort="name">Name <span class="sort-arrow">‚ñ≤</span></th>
                    <th data-sort="size">Size <span class="sort-arrow">‚ñ≤</span></th>
                    <th data-sort="date">Last Modified <span class="sort-arrow">‚ñ≤</span></th>
                </tr>
            </thead>
            <tbody id="fileListBody"></tbody>
        </table>
    </div>

    <!-- GRID VIEW -->
    <div class="file-grid hidden" id="gridView"></div>

    <!-- EMPTY STATE -->
    <div class="empty-state hidden" id="emptyState">
        <div class="empty-icon">üì≠</div>
        <p>No files match your search.</p>
    </div>
</div>

<!-- FOOTER -->
<footer>
    <div class="foot-inner">
        <div class="foot-brand">
            <svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <defs><linearGradient id="flg" x1="0%" y1="0%" x2="100%" y2="100%"><stop offset="0%" stop-color="#6366f1"/><stop offset="100%" stop-color="#06b6d4"/></linearGradient></defs>
                <polygon points="50,8 92,30 92,70 50,92 8,70 8,30" fill="none" stroke="url(#flg)" stroke-width="3"/>
                <text x="50" y="58" text-anchor="middle" font-family="system-ui" font-weight="900" font-size="28" fill="url(#flg)">E</text>
            </svg>
            <span>Enginx</span>
        </div>
        <div class="foot-text">Enginx Autoindex ‚Äî Directory Listing</div>
    </div>
</footer>

<script>
(function () {
    // ===== FILE ICON MAP =====
    const iconMap = {
        // Folders
        folder:     { icon: 'üìÅ', cls: 'icon-folder' },
        parent:     { icon: 'üîô', cls: 'icon-parent' },

        // Web
        html:       { icon: 'üåê', cls: 'icon-html' },
        htm:        { icon: 'üåê', cls: 'icon-html' },
        css:        { icon: 'üé®', cls: 'icon-css' },
        scss:       { icon: 'üé®', cls: 'icon-css' },
        sass:       { icon: 'üé®', cls: 'icon-css' },
        less:       { icon: 'üé®', cls: 'icon-css' },

        // JavaScript / TypeScript
        js:         { icon: '‚ö°', cls: 'icon-js' },
        mjs:        { icon: '‚ö°', cls: 'icon-js' },
        jsx:        { icon: '‚öõÔ∏è', cls: 'icon-js' },
        ts:         { icon: 'üî∑', cls: 'icon-ts' },
        tsx:        { icon: 'üî∑', cls: 'icon-ts' },

        // Languages
        py:         { icon: 'üêç', cls: 'icon-py' },
        php:        { icon: 'üêò', cls: 'icon-php' },
        rb:         { icon: 'üíé', cls: 'icon-rb' },
        c:          { icon: 'üá®', cls: 'icon-c' },
        cpp:        { icon: '‚öôÔ∏è', cls: 'icon-cpp' },
        cc:         { icon: '‚öôÔ∏è', cls: 'icon-cpp' },
        cxx:        { icon: '‚öôÔ∏è', cls: 'icon-cpp' },
        h:          { icon: 'üìã', cls: 'icon-h' },
        hpp:        { icon: 'üìã', cls: 'icon-h' },
        hxx:        { icon: 'üìã', cls: 'icon-h' },
        java:       { icon: '‚òï', cls: 'icon-java' },
        class:      { icon: '‚òï', cls: 'icon-java' },
        jar:        { icon: '‚òï', cls: 'icon-java' },
        go:         { icon: 'üîµ', cls: 'icon-go' },
        rs:         { icon: 'ü¶Ä', cls: 'icon-rs' },
        swift:      { icon: 'üê¶', cls: 'icon-java' },
        kt:         { icon: 'üü£', cls: 'icon-cpp' },
        lua:        { icon: 'üåô', cls: 'icon-py' },
        pl:         { icon: 'üê™', cls: 'icon-py' },
        r:          { icon: 'üìä', cls: 'icon-c' },

        // Data / Config
        json:       { icon: 'üì¶', cls: 'icon-json' },
        xml:        { icon: 'üìÑ', cls: 'icon-xml' },
        yaml:       { icon: '‚öôÔ∏è', cls: 'icon-yaml' },
        yml:        { icon: '‚öôÔ∏è', cls: 'icon-yaml' },
        toml:       { icon: '‚öôÔ∏è', cls: 'icon-yaml' },
        ini:        { icon: '‚öôÔ∏è', cls: 'icon-conf' },
        conf:       { icon: '‚öôÔ∏è', cls: 'icon-conf' },
        cfg:        { icon: '‚öôÔ∏è', cls: 'icon-conf' },
        env:        { icon: 'üîë', cls: 'icon-env' },
        csv:        { icon: 'üìä', cls: 'icon-json' },

        // Documents
        md:         { icon: 'üìù', cls: 'icon-md' },
        markdown:   { icon: 'üìù', cls: 'icon-md' },
        txt:        { icon: 'üìÑ', cls: 'icon-txt' },
        rtf:        { icon: 'üìÑ', cls: 'icon-txt' },
        pdf:        { icon: 'üìï', cls: 'icon-pdf' },
        doc:        { icon: 'üìò', cls: 'icon-pdf' },
        docx:       { icon: 'üìò', cls: 'icon-pdf' },
        xls:        { icon: 'üìó', cls: 'icon-py' },
        xlsx:       { icon: 'üìó', cls: 'icon-py' },
        ppt:        { icon: 'üìô', cls: 'icon-java' },
        pptx:       { icon: 'üìô', cls: 'icon-java' },

        // Images
        png:        { icon: 'üñºÔ∏è', cls: 'icon-img' },
        jpg:        { icon: 'üñºÔ∏è', cls: 'icon-img' },
        jpeg:       { icon: 'üñºÔ∏è', cls: 'icon-img' },
        gif:        { icon: 'üñºÔ∏è', cls: 'icon-img' },
        bmp:        { icon: 'üñºÔ∏è', cls: 'icon-img' },
        webp:       { icon: 'üñºÔ∏è', cls: 'icon-img' },
        ico:        { icon: 'üñºÔ∏è', cls: 'icon-img' },
        svg:        { icon: 'üî∂', cls: 'icon-svg' },
        tiff:       { icon: 'üñºÔ∏è', cls: 'icon-img' },

        // Video
        mp4:        { icon: 'üé¨', cls: 'icon-video' },
        mkv:        { icon: 'üé¨', cls: 'icon-video' },
        avi:        { icon: 'üé¨', cls: 'icon-video' },
        mov:        { icon: 'üé¨', cls: 'icon-video' },
        wmv:        { icon: 'üé¨', cls: 'icon-video' },
        webm:       { icon: 'üé¨', cls: 'icon-video' },
        flv:        { icon: 'üé¨', cls: 'icon-video' },

        // Audio
        mp3:        { icon: 'üéµ', cls: 'icon-audio' },
        wav:        { icon: 'üéµ', cls: 'icon-audio' },
        ogg:        { icon: 'üéµ', cls: 'icon-audio' },
        flac:       { icon: 'üéµ', cls: 'icon-audio' },
        aac:        { icon: 'üéµ', cls: 'icon-audio' },
        m4a:        { icon: 'üéµ', cls: 'icon-audio' },

        // Archives
        zip:        { icon: 'üóúÔ∏è', cls: 'icon-zip' },
        tar:        { icon: 'üóúÔ∏è', cls: 'icon-zip' },
        gz:         { icon: 'üóúÔ∏è', cls: 'icon-zip' },
        bz2:        { icon: 'üóúÔ∏è', cls: 'icon-zip' },
        xz:         { icon: 'üóúÔ∏è', cls: 'icon-zip' },
        rar:        { icon: 'üóúÔ∏è', cls: 'icon-zip' },
        '7z':       { icon: 'üóúÔ∏è', cls: 'icon-zip' },
        deb:        { icon: 'üì¶', cls: 'icon-zip' },
        rpm:        { icon: 'üì¶', cls: 'icon-zip' },

        // Executables / Binaries
        exe:        { icon: '‚¨õ', cls: 'icon-exe' },
        out:        { icon: '‚¨õ', cls: 'icon-exe' },
        bin:        { icon: '‚¨õ', cls: 'icon-exe' },
        o:          { icon: '‚¨õ', cls: 'icon-exe' },
        a:          { icon: 'üìö', cls: 'icon-exe' },
        so:         { icon: 'üîó', cls: 'icon-exe' },
        dll:        { icon: 'üîó', cls: 'icon-exe' },

        // Shell / Scripts
        sh:         { icon: 'üêö', cls: 'icon-sh' },
        bash:       { icon: 'üêö', cls: 'icon-sh' },
        zsh:        { icon: 'üêö', cls: 'icon-sh' },
        fish:       { icon: 'üêö', cls: 'icon-sh' },
        bat:        { icon: 'üêö', cls: 'icon-sh' },
        ps1:        { icon: 'üêö', cls: 'icon-sh' },

        // DevOps / Build
        Dockerfile: { icon: 'üê≥', cls: 'icon-docker' },
        Makefile:   { icon: 'üî®', cls: 'icon-make' },
        CMakeLists: { icon: 'üî®', cls: 'icon-make' },
        Vagrantfile:{ icon: 'üì¶', cls: 'icon-docker' },

        // Database
        sql:        { icon: 'üóÉÔ∏è', cls: 'icon-sql' },
        db:         { icon: 'üóÉÔ∏è', cls: 'icon-sql' },
        sqlite:     { icon: 'üóÉÔ∏è', cls: 'icon-sql' },

        // Git
        gitignore:  { icon: 'üôà', cls: 'icon-git' },
        gitmodules: { icon: 'üîó', cls: 'icon-git' },
        gitattributes: { icon: '‚öôÔ∏è', cls: 'icon-git' },

        // Lock files
        lock:       { icon: 'üîí', cls: 'icon-lock' },

        // Logs
        log:        { icon: 'üìã', cls: 'icon-log' },

        // Fonts
        ttf:        { icon: 'üî§', cls: 'icon-font' },
        otf:        { icon: 'üî§', cls: 'icon-font' },
        woff:       { icon: 'üî§', cls: 'icon-font' },
        woff2:      { icon: 'üî§', cls: 'icon-font' },
        eot:        { icon: 'üî§', cls: 'icon-font' },

        // Misc
        LICENSE:    { icon: 'üìú', cls: 'icon-txt' },
        README:     { icon: 'üìñ', cls: 'icon-md' },
    };

    function getFileIcon(name, isDir) {
        if (isDir) return iconMap.folder;
        if (name === '..') return iconMap.parent;

        // Check exact filename matches first
        const baseName = name.split('/').pop();
        if (iconMap[baseName]) return iconMap[baseName];

        // Check by extension
        const parts = baseName.split('.');
        if (parts.length > 1) {
            const ext = parts.pop().toLowerCase();
            if (iconMap[ext]) return iconMap[ext];
        }

        return { icon: 'üìÑ', cls: 'icon-default' };
    }

    function formatSize(bytes) {
        if (bytes === 0 || bytes === '-') return '‚Äî';
        const units = ['B', 'KB', 'MB', 'GB', 'TB'];
        let i = 0;
        let size = typeof bytes === 'number' ? bytes : parseInt(bytes);
        if (isNaN(size)) return '‚Äî';
        while (size >= 1024 && i < units.length - 1) { size /= 1024; i++; }
        return size.toFixed(i === 0 ? 0 : 1) + ' ' + units[i];
    }

    // ===== DEMO DATA (replace with server-generated data) =====
    // Your C++ server should replace this array with actual directory contents.
    // Each entry: { name, href, isDir, size (bytes or '-'), date }
    const FILES = [
